{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "datasource",
          "uid": "grafana"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "target": {
          "limit": 100,
          "matchAny": false,
          "tags": [],
          "type": "dashboard"
        },
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": 1,
  "links": [],
  "liveNow": true,
  "panels": [
    {
      "collapsed": true,
      "datasource": {
        "type": "influxdb",
        "uid": "OQ-uc2t4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 55,
      "panels": [
        {
          "datasource": {
            "type": "elasticsearch",
            "uid": "jV5rFTA4z"
          },
          "description": "per-country blocks for all interfaces for when src_ip is not RFC1908",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                }
              },
              "displayName": "Blocks / Country",
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#37872D",
                    "value": null
                  },
                  {
                    "color": "#E0B400",
                    "value": 10
                  },
                  {
                    "color": "#38bceb",
                    "value": 50
                  },
                  {
                    "color": "#C4162A",
                    "value": 100
                  },
                  {
                    "color": "#8c7437",
                    "value": 250
                  },
                  {
                    "color": "#8F3BB8",
                    "value": 500
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 12,
            "w": 24,
            "x": 0,
            "y": 1
          },
          "id": 172,
          "maxDataPoints": 1,
          "options": {
            "basemap": {
              "config": {},
              "name": "Basemap",
              "type": "default"
            },
            "controls": {
              "mouseWheelZoom": true,
              "showAttribution": true,
              "showDebug": false,
              "showMeasure": true,
              "showScale": true,
              "showZoom": true
            },
            "layers": [
              {
                "config": {
                  "showLegend": true,
                  "style": {
                    "color": {
                      "field": "Total",
                      "fixed": "dark-green"
                    },
                    "opacity": 0.5,
                    "rotation": {
                      "fixed": 0,
                      "max": 360,
                      "min": -360,
                      "mode": "mod"
                    },
                    "size": {
                      "field": "Total",
                      "fixed": 5,
                      "max": 50,
                      "min": 2
                    },
                    "symbol": {
                      "fixed": "img/icons/marker/circle.svg",
                      "mode": "fixed"
                    },
                    "symbolAlign": {
                      "horizontal": "center",
                      "vertical": "center"
                    },
                    "text": {
                      "field": "Field",
                      "fixed": "",
                      "mode": "field"
                    },
                    "textConfig": {
                      "fontSize": 10,
                      "offsetX": 0,
                      "offsetY": 0,
                      "textAlign": "center",
                      "textBaseline": "middle"
                    }
                  }
                },
                "filterData": {
                  "id": "byRefId",
                  "options": "A"
                },
                "location": {
                  "lookup": "Field",
                  "mode": "lookup"
                },
                "name": "blocks",
                "tooltip": true,
                "type": "markers"
              }
            ],
            "tooltip": {
              "mode": "details"
            },
            "view": {
              "allLayers": true,
              "id": "coords",
              "lat": 44.054202,
              "lon": 5.102784,
              "zoom": 1.6
            }
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "alias": "",
              "bucketAggs": [
                {
                  "field": "src_ip_country_code",
                  "id": "2",
                  "settings": {
                    "min_doc_count": "1",
                    "order": "desc",
                    "orderBy": "_count",
                    "size": "0"
                  },
                  "type": "terms"
                },
                {
                  "field": "timestamp",
                  "id": "3",
                  "settings": {
                    "interval": "auto",
                    "min_doc_count": "0",
                    "timeZone": "utc",
                    "trimEdges": "0"
                  },
                  "type": "date_histogram"
                }
              ],
              "datasource": {
                "type": "elasticsearch",
                "uid": "jV5rFTA4z"
              },
              "hide": false,
              "metrics": [
                {
                  "id": "1",
                  "type": "count"
                }
              ],
              "query": "interface:$iface AND src_ip:$src_ip AND action:\"block\"",
              "refId": "A",
              "timeField": "timestamp"
            }
          ],
          "title": "Firewall Blocked Event Locations on $iface",
          "transformations": [
            {
              "id": "reduce",
              "options": {
                "includeTimeField": false,
                "mode": "seriesToRows",
                "reducers": [
                  "sum"
                ]
              }
            }
          ],
          "transparent": true,
          "type": "geomap"
        },
        {
          "datasource": {
            "type": "elasticsearch",
            "uid": "jV5rFTA4z"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                }
              },
              "decimals": 0,
              "mappings": [],
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 5,
            "x": 0,
            "y": 13
          },
          "id": 61,
          "maxDataPoints": 1,
          "options": {
            "displayLabels": [
              "name"
            ],
            "legend": {
              "calcs": [],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "values": [
                "value"
              ]
            },
            "pieType": "pie",
            "reduceOptions": {
              "calcs": [
                "sum"
              ],
              "fields": "",
              "values": false
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "targets": [
            {
              "alias": "",
              "bucketAggs": [
                {
                  "$$hashKey": "object:1775",
                  "fake": true,
                  "field": "dst_port",
                  "id": "3",
                  "settings": {
                    "min_doc_count": 1,
                    "order": "desc",
                    "orderBy": "_count",
                    "size": "5"
                  },
                  "type": "terms"
                },
                {
                  "$$hashKey": "object:1776",
                  "field": "timestamp",
                  "id": "2",
                  "settings": {
                    "interval": "auto",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "datasource": {
                "type": "elasticsearch",
                "uid": "jV5rFTA4z"
              },
              "dsType": "elasticsearch",
              "metrics": [
                {
                  "$$hashKey": "object:1773",
                  "field": "select field",
                  "id": "1",
                  "type": "count"
                }
              ],
              "query": "interface:$iface AND src_ip:$src_ip AND dst_port:$dst_port AND action:\"block\"",
              "refId": "A",
              "target": "",
              "timeField": "timestamp"
            }
          ],
          "title": "Firewall Blocked Destination Ports on $iface",
          "type": "piechart"
        },
        {
          "datasource": {
            "type": "elasticsearch",
            "uid": "jV5rFTA4z"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                }
              },
              "decimals": 0,
              "mappings": [],
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 5,
            "x": 5,
            "y": 13
          },
          "id": 65,
          "maxDataPoints": 1,
          "options": {
            "displayLabels": [
              "name"
            ],
            "legend": {
              "calcs": [],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "values": [
                "value"
              ]
            },
            "pieType": "pie",
            "reduceOptions": {
              "calcs": [
                "sum"
              ],
              "fields": "",
              "values": false
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "bucketAggs": [
                {
                  "$$hashKey": "object:1049",
                  "fake": true,
                  "field": "protocol",
                  "id": "3",
                  "settings": {
                    "min_doc_count": 1,
                    "order": "desc",
                    "orderBy": "_term",
                    "size": "0"
                  },
                  "type": "terms"
                },
                {
                  "$$hashKey": "object:1050",
                  "field": "timestamp",
                  "id": "2",
                  "settings": {
                    "interval": "auto",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "datasource": {
                "type": "elasticsearch",
                "uid": "jV5rFTA4z"
              },
              "dsType": "elasticsearch",
              "metrics": [
                {
                  "$$hashKey": "object:1047",
                  "field": "select field",
                  "id": "1",
                  "type": "count"
                }
              ],
              "query": "interface:$iface AND src_ip:$src_ip AND action:\"block\"",
              "refId": "A",
              "timeField": "timestamp"
            }
          ],
          "title": "Firewall Blocked Protocols on $iface",
          "type": "piechart"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [
                {
                  "options": {
                    "match": "null",
                    "result": {
                      "index": 0,
                      "text": "N/A"
                    }
                  },
                  "type": "special"
                }
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 3,
            "w": 3,
            "x": 10,
            "y": 13
          },
          "id": 6,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "last"
              ],
              "fields": "/.*/",
              "values": false
            },
            "showPercentChange": false,
            "text": {},
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: -20s)\r\n  |> filter(fn: (r) =>\r\n    r._measurement == \"system\" and\r\n    r._field == \"uptime_format\"\r\n  )\r\n  |> keep(columns: [\"_value\"])\r\n  |> last()\r\n",
              "refId": "A"
            }
          ],
          "title": "Uptime",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "description": "Zombies, Unknown, or Blocked",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/.*/"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "${__field.name}"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 5,
            "w": 5,
            "x": 13,
            "y": 13
          },
          "id": 531,
          "options": {
            "displayMode": "gradient",
            "maxVizHeight": 300,
            "minVizHeight": 16,
            "minVizWidth": 8,
            "namePlacement": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showUnfilled": true,
            "sizing": "auto",
            "valueMode": "color"
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"processes\")\n  |> filter(fn: (r) => r[\"_field\"] == \"zombies\" or r[\"_field\"] == \"blocked\" or r[\"_field\"] == \"unknown\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Processes (potential issues)",
          "type": "bargauge"
        },
        {
          "datasource": {
            "type": "elasticsearch",
            "uid": "jV5rFTA4z"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "purple",
                "mode": "palette-classic"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "string"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 10,
            "w": 6,
            "x": 18,
            "y": 13
          },
          "id": 67,
          "maxDataPoints": 100,
          "options": {
            "colorMode": "value",
            "fieldOptions": {
              "calcs": [
                "first"
              ]
            },
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "horizontal",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "first"
              ],
              "fields": "/^src_ip$/",
              "limit": 10,
              "values": true
            },
            "showPercentChange": false,
            "text": {},
            "textMode": "value",
            "wideLayout": true
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "bucketAggs": [
                {
                  "$$hashKey": "object:120",
                  "fake": true,
                  "field": "src_ip",
                  "id": "3",
                  "settings": {
                    "min_doc_count": 1,
                    "order": "desc",
                    "orderBy": "_count",
                    "size": "10"
                  },
                  "type": "terms"
                }
              ],
              "datasource": {
                "type": "elasticsearch",
                "uid": "jV5rFTA4z"
              },
              "dsType": "elasticsearch",
              "metrics": [
                {
                  "$$hashKey": "object:118",
                  "field": "select field",
                  "id": "1",
                  "type": "count"
                }
              ],
              "query": "action:\"block\" AND interface:$iface AND src_ip:$src_ip AND dst_port:$dst_port",
              "refId": "A",
              "target": "",
              "timeField": "timestamp"
            }
          ],
          "title": "Top IP Blocked on $iface",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "displayName": "CPU",
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 70
                  },
                  {
                    "color": "red",
                    "value": 85
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 10,
            "y": 16
          },
          "id": 4,
          "maxDataPoints": 9000,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "last"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto",
            "text": {}
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: -20s)\r\n  |> filter(fn: (r) =>\r\n    r._measurement == \"cpu\" and\r\n    r._field == \"usage_idle\" and\r\n    r.cpu == \"cpu-total\"\r\n  )\r\n  |> map(fn: (r) => ({\r\n        r with\r\n        _value: r._value * -1.0 + 100.0\r\n      })\r\n    )\r\n  |> keep(columns: [\"_value\"])\r\n  |> last()",
              "refId": "A"
            }
          ],
          "title": "CPU Total",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "description": "Total, Wait, or Sleeping",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/.*/"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "${__field.name}"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 5,
            "w": 5,
            "x": 13,
            "y": 18
          },
          "id": 532,
          "options": {
            "displayMode": "gradient",
            "maxVizHeight": 300,
            "minVizHeight": 16,
            "minVizWidth": 8,
            "namePlacement": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showUnfilled": true,
            "sizing": "auto",
            "valueMode": "color"
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"processes\")\n  |> filter(fn: (r) => r[\"_field\"] == \"total\" or r[\"_field\"] == \"wait\" or r[\"_field\"] == \"sleeping\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Processes (not isues)",
          "type": "bargauge"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "center",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false,
                "minWidth": 1
              },
              "decimals": 1,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "locale"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 7,
            "x": 0,
            "y": 19
          },
          "id": 16,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"pf\" and\r\n    r._field =~ /match|state-mismatch|state-insert/\r\n  )\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  |> last()",
              "refId": "A"
            }
          ],
          "title": "PF Information",
          "transformations": [
            {
              "id": "concatenate",
              "options": {
                "frameNameLabel": "frame",
                "frameNameMode": "drop"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": false
                },
                "indexByName": {},
                "renameByName": {
                  "Time": "",
                  "match": "Match",
                  "state-insert": "State Insert",
                  "state-mismatch": "State Mismatch"
                }
              }
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "pattern": "/Match|State Insert|State Mismatch/"
                }
              }
            }
          ],
          "type": "table"
        },
        {
          "datasource": {
            "type": "elasticsearch",
            "uid": "jV5rFTA4z"
          },
          "fieldConfig": {
            "defaults": {
              "mappings": [
                {
                  "options": {
                    "match": "null",
                    "result": {
                      "text": "N/A"
                    }
                  },
                  "type": "special"
                }
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 7,
            "y": 19
          },
          "id": 111,
          "options": {
            "colorMode": "value",
            "fieldOptions": {
              "calcs": [
                "sum"
              ]
            },
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "sum"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "text": {},
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "bucketAggs": [
                {
                  "$$hashKey": "object:14",
                  "field": "timestamp",
                  "id": "2",
                  "settings": {
                    "interval": "auto",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "datasource": {
                "type": "elasticsearch",
                "uid": "jV5rFTA4z"
              },
              "metrics": [
                {
                  "$$hashKey": "object:12",
                  "field": "select field",
                  "id": "1",
                  "type": "count"
                }
              ],
              "query": "interface:$iface AND src_ip:$src_ip AND dst_port:$dst_port AND action:\"block\"",
              "refId": "A",
              "target": "",
              "timeField": "timestamp"
            }
          ],
          "title": "Firewall Blocked Events on $iface",
          "type": "stat"
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "OQ-uc2t4k"
          },
          "refId": "A"
        }
      ],
      "title": "Firewall",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 1
      },
      "id": 234,
      "panels": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "description": "zfs pool size (GBs)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "blue",
                    "value": 50
                  },
                  {
                    "color": "yellow",
                    "value": 75
                  },
                  {
                    "color": "orange",
                    "value": 80
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/.*/"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "${__field.name}"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 0,
            "y": 2
          },
          "id": 233,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto"
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"zfs_pool\")\n  |> filter(fn: (r) => r[\"_field\"] == \"size\")\n   |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Size",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "description": "zfs pool capacity (%",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "blue",
                    "value": 50
                  },
                  {
                    "color": "yellow",
                    "value": 75
                  },
                  {
                    "color": "orange",
                    "value": 80
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 3,
            "y": 2
          },
          "id": 358,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto"
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"zfs_pool\")\n  |> filter(fn: (r) => r[\"_field\"] == \"capacity\")\n   |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Capacity",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "description": "zfs pool free space (GBs)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "blue",
                    "value": 50
                  },
                  {
                    "color": "yellow",
                    "value": 75
                  },
                  {
                    "color": "orange",
                    "value": 80
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/.*/"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "${__field.name}"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 6,
            "y": 2
          },
          "id": 357,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"zfs_pool\")\n  |> filter(fn: (r) => r[\"_field\"] == \"free\")\n   |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Free",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "description": "zfs pool fragmented space (GBs)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "blue",
                    "value": 50
                  },
                  {
                    "color": "yellow",
                    "value": 75
                  },
                  {
                    "color": "orange",
                    "value": 80
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/.*/"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "${__field.name}"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 12,
            "y": 2
          },
          "id": 356,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"zfs_pool\")\n  |> filter(fn: (r) => r[\"_field\"] == \"fragmentation\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Fragmentation",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "description": "zfs pool allocated space (GBs)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "blue",
                    "value": 50
                  },
                  {
                    "color": "yellow",
                    "value": 75
                  },
                  {
                    "color": "orange",
                    "value": 80
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/.*/"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "${__field.name}"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 18,
            "y": 2
          },
          "id": 295,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"zfs_pool\")\n  |> filter(fn: (r) => r[\"_field\"] == \"allocated\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Allocated",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "description": "zfs pool misses across arc, l2, vdev and zfs stats",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "x 10^3",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "blue",
                    "value": 50
                  },
                  {
                    "color": "yellow",
                    "value": 75
                  },
                  {
                    "color": "orange",
                    "value": 80
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/.*/"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "${__field.name}"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 0,
            "y": 6
          },
          "id": 419,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"zfs\")\n  |> filter(fn: (r) => r[\"_field\"] == \"arcstats_demand_data_misses\" or r[\"_field\"] == \"arcstats_l2_misses\" or r[\"_field\"] == \"arcstats_misses\" or r[\"_field\"] == \"vdev_cache_stats_misses\" or r[\"_field\"] == \"zfetchstats_misses\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "ZFS Missess",
          "type": "timeseries"
        }
      ],
      "title": "ZFS (zroot pool)",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "influxdb",
        "uid": "OQ-uc2t4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 2
      },
      "id": 22,
      "panels": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 10,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 9,
            "x": 0,
            "y": 3
          },
          "id": 2,
          "maxDataPoints": 9000,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull",
                "max"
              ],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "desc"
            }
          },
          "pluginVersion": "10.3.1",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"cpu\" and\r\n    r._field == \"usage_idle\")\r\n  |> map(fn: (r) => ({\r\n        r with\r\n        _value: r._value * -1.0 + 100.0\r\n      })\r\n    )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> drop(columns: [\"host\"])",
              "refId": "A"
            }
          ],
          "title": "CPU",
          "transformations": [
            {
              "id": "labelsToFields",
              "options": {
                "valueLabel": "cpu"
              }
            },
            {
              "id": "concatenate",
              "options": {
                "frameNameLabel": "frame",
                "frameNameMode": "drop"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "cpu-total": true
                },
                "indexByName": {},
                "renameByName": {}
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 10,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 5,
            "x": 9,
            "y": 3
          },
          "id": 14,
          "maxDataPoints": 9000,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull",
                "max",
                "min"
              ],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "10.3.1",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"mem\" and\r\n    r._field == \"used_percent\"\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  ",
              "refId": "A"
            }
          ],
          "title": "Ram",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {},
                "renameByName": {
                  "used_percent": "Ram Used"
                }
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 10,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 1,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 7,
            "x": 14,
            "y": 3
          },
          "id": 10,
          "maxDataPoints": 9000,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull",
                "max"
              ],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "10.3.1",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"system\" and\r\n    r._field =~ /load1|load5|load15/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))",
              "refId": "A"
            }
          ],
          "title": "Load",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 9,
            "x": 0,
            "y": 11
          },
          "id": 12,
          "maxDataPoints": 9000,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "hide": false,
              "query": "from(bucket: \"${bucket}\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"disk\")\r\n  |> filter(fn: (r) => r[\"device\"] != \"devfs\")\r\n  |> filter(fn: (r) => r[\"device\"] != \"zroot\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"used_percent\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Disk Utilization",
          "transformations": [
            {
              "id": "labelsToFields",
              "options": {
                "valueLabel": "path"
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 10,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "celsius"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 9,
            "y": 11
          },
          "id": 18,
          "maxDataPoints": 9000,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull",
                "max",
                "min"
              ],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "10.3.1",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\r\n  |> range(start: v.timeRangeStart)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /$/ and\r\n    r.sensor =~ /$/ and\r\n    r._measurement == \"temperature\" and\r\n    r._field == \"degrees\"\r\n  )\r\n  |> aggregateWindow(every:10s, fn: last)",
              "refId": "A"
            }
          ],
          "title": "Temperature Sensors",
          "transformations": [
            {
              "id": "labelsToFields",
              "options": {
                "valueLabel": "sensor"
              }
            }
          ],
          "type": "timeseries"
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "OQ-uc2t4k"
          },
          "refId": "A"
        }
      ],
      "title": "Hardware",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "influxdb",
        "uid": "OQ-uc2t4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 3
      },
      "id": 24,
      "panels": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "center",
                "cellOptions": {
                  "type": "color-text"
                },
                "filterable": true,
                "inspect": false,
                "minWidth": 1
              },
              "mappings": [
                {
                  "options": {
                    "0": {
                      "index": 2,
                      "text": "DOWN"
                    },
                    "1": {
                      "index": 1,
                      "text": "UP"
                    },
                    "2": {
                      "index": 0,
                      "text": "UNKNOWN"
                    }
                  },
                  "type": "value"
                }
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#ffffff",
                    "value": null
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Status"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "transparent",
                          "value": null
                        },
                        {
                          "color": "red",
                          "value": 0
                        },
                        {
                          "color": "green",
                          "value": 1
                        },
                        {
                          "color": "orange",
                          "value": 2
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 9,
            "w": 24,
            "x": 0,
            "y": 4
          },
          "id": 32,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "frameIndex": 0,
            "showHeader": true,
            "sortBy": []
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) => r[\"host\"] =~ /$/)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"interface\")\r\n  |> last()\r\n  |> group()\r\n  |> keep(columns: [\"friendlyname\", \"ip4_address\", \"ip4_subnet\", \"ip6_address\", \"ip6_subnet\", \"mac_address\", \"name\", \"_value\"] )\r\n  |> sort(columns: [\"name\"], desc: false)",
              "refId": "A"
            }
          ],
          "title": "Interface Summary",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {
                  "_value": 5,
                  "friendlyname": 1,
                  "ip4_address": 2,
                  "ip4_subnet": 3,
                  "mac_address": 4,
                  "name": 0
                },
                "renameByName": {
                  "_value": "Status",
                  "friendlyname": "Friendly Name",
                  "ip4_address": "IPv4 Address",
                  "ip4_subnet": "Subnet",
                  "mac_address": "Physical Address",
                  "name": "Interface"
                }
              }
            }
          ],
          "type": "table"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "center",
                "cellOptions": {
                  "type": "color-text"
                },
                "filterable": true,
                "inspect": false,
                "minWidth": 1
              },
              "mappings": [
                {
                  "options": {
                    "0": {
                      "color": "red",
                      "index": 0,
                      "text": "OFFLINE"
                    },
                    "1": {
                      "color": "green",
                      "index": 1,
                      "text": "ONLINE"
                    }
                  },
                  "type": "value"
                }
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#ffffff",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 16,
            "x": 0,
            "y": 13
          },
          "id": 46,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "frameIndex": 3,
            "showHeader": true,
            "sortBy": [
              {
                "desc": false
              }
            ]
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) =>\r\n    r._measurement == \"gateways\" and\r\n    r._field =~ /gwdescr|source|monitor|status|gateway_name|interface/\r\n    )\r\n  |> last()\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))",
              "refId": "A"
            }
          ],
          "title": "Gateway Summary - $Gateway",
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "gwdescr",
                    "monitor",
                    "source",
                    "status"
                  ]
                }
              }
            },
            {
              "id": "concatenate",
              "options": {
                "frameNameLabel": "frame",
                "frameNameMode": "drop"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {},
                "renameByName": {
                  "gwdescr": "Gateway Description",
                  "monitor": "Monitor IP",
                  "source": "Source IP",
                  "status": "Status"
                }
              }
            }
          ],
          "type": "table"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 10,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 10,
                  "type": "log"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 8,
            "x": 16,
            "y": 13
          },
          "id": 26,
          "maxDataPoints": 9000,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull",
                "max",
                "min"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "10.3.1",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"gateways\")\r\n  |> filter(fn: (r) => r[\"gateway_name\"] =~ /$/)\r\n  |> filter(fn: (r) => r[\"_field\"] == \"delay\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Gateway RTT - $Gateway ",
          "transformations": [
            {
              "id": "labelsToFields",
              "options": {
                "valueLabel": "gateway_name"
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 10,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 8,
            "x": 0,
            "y": 17
          },
          "id": 38,
          "maxDataPoints": 9000,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "10.3.1",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: \"${bucket}\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"gateways\")\r\n  |> filter(fn: (r) => r[\"gateway_name\"] =~ /$/)\r\n  |> filter(fn: (r) => r[\"_field\"] == \"loss\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Gateway Loss - $Gateway ",
          "transformations": [
            {
              "id": "labelsToFields",
              "options": {
                "valueLabel": "gateway_name"
              }
            }
          ],
          "type": "timeseries"
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "OQ-uc2t4k"
          },
          "refId": "A"
        }
      ],
      "title": "Network Stats",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "influxdb",
        "uid": "OQ-uc2t4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 4
      },
      "id": 30,
      "panels": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 10,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "bps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 5
          },
          "id": 34,
          "maxDataPoints": 9000,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "10.3.1",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${WAN:regex}$/ and \r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: r._value * 8.0\r\n    })\r\n  )\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))",
              "refId": "A"
            }
          ],
          "title": "WAN Traffic - Bits/sec",
          "transformations": [
            {
              "id": "concatenate",
              "options": {
                "frameNameLabel": "frame",
                "frameNameMode": "drop"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Time": "",
                  "bytes_recv": "Bits Recv",
                  "bytes_sent": "Bits Sent"
                }
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 2,
              "mappings": [
                {
                  "options": {
                    "match": "null",
                    "result": {
                      "index": 0,
                      "text": "N/A"
                    }
                  },
                  "type": "special"
                }
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "bps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 5,
            "x": 6,
            "y": 5
          },
          "id": 36,
          "maxDataPoints": 9000,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "text": {},
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${WAN:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: r._value * 8.0\r\n    })\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  |> last()",
              "refId": "A"
            }
          ],
          "title": "WAN Traffic - Bits/sec",
          "transformations": [
            {
              "id": "concatenate",
              "options": {
                "frameNameLabel": "frame",
                "frameNameMode": "drop"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true
                },
                "indexByName": {},
                "renameByName": {
                  "bytes_recv": "Bits Recv",
                  "bytes_sent": "Bits Sent"
                }
              }
            }
          ],
          "type": "stat"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 2,
              "mappings": [
                {
                  "options": {
                    "match": "null",
                    "result": {
                      "index": 0,
                      "text": "N/A"
                    }
                  },
                  "type": "special"
                }
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 5,
            "x": 11,
            "y": 5
          },
          "hideTimeOverride": true,
          "id": 40,
          "maxDataPoints": 9000,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "sum"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "text": {},
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.1.3",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: -30d)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${WAN:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> aggregateWindow(every: 1h, fn: last)\r\n  |> difference(nonNegative: true)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))",
              "refId": "A"
            }
          ],
          "timeFrom": "now/M",
          "title": "WAN - Bandwidth",
          "transformations": [
            {
              "id": "concatenate",
              "options": {
                "frameNameLabel": "frame",
                "frameNameMode": "drop"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {},
                "renameByName": {
                  "bytes_recv": "Bytes Recv - This Month",
                  "bytes_sent": "Bytes Sent - This Month"
                }
              }
            }
          ],
          "type": "stat"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "K3cQFTA4k"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 16,
            "y": 5
          },
          "id": 42,
          "maxDataPoints": 9000,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull",
                "max",
                "min"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "10.3.1",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "K3cQFTA4k"
              },
              "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.interface =~ /^${WAN:regex}$/ and \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /packets_recv|packets_sent/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))",
              "refId": "A"
            }
          ],
          "title": "WAN - Throughput",
          "transformations": [
            {
              "id": "concatenate",
              "options": {
                "frameNameLabel": "frame",
                "frameNameMode": "drop"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {},
                "renameByName": {
                  "packets_recv": "Packets Recv",
                  "packets_sent": "Packets Sent"
                }
              }
            }
          ],
          "type": "timeseries"
        }
      ],
      "repeat": "WAN",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "OQ-uc2t4k"
          },
          "refId": "A"
        }
      ],
      "title": "WAN Interface - $WAN",
      "type": "row"
    }
  ],
  "refresh": "10s",
  "schemaVersion": 39,
  "tags": [
    "OPNsense",
    "telegraf"
  ],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "opnsense",
          "value": "opnsense"
        },
        "hide": 0,
        "includeAll": false,
        "label": "bucket",
        "multi": false,
        "name": "bucket",
        "options": [
          {
            "selected": true,
            "text": "opnsense",
            "value": "opnsense"
          }
        ],
        "query": "opnsense",
        "skipUrlSync": false,
        "type": "custom"
      },
      {
        "current": {
          "selected": true,
          "text": [
            "All"
          ],
          "value": [
            "$__all"
          ]
        },
        "datasource": {
          "type": "influxdb",
          "uid": "K3cQFTA4k"
        },
        "definition": "from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"pf\")\r\n|> keyValues(keyColumns: [\"host\"])\r\n|> group()\r\n|> keep(columns: [\"host\"])\r\n|> distinct(column: \"host\")",
        "hide": 0,
        "includeAll": true,
        "label": "OPNsense",
        "multi": true,
        "name": "Host",
        "options": [],
        "query": "from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"pf\")\r\n|> keyValues(keyColumns: [\"host\"])\r\n|> group()\r\n|> keep(columns: [\"host\"])\r\n|> distinct(column: \"host\")",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "type": "query"
      },
      {
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "influxdb",
          "uid": "K3cQFTA4k"
        },
        "definition": "from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => \r\n    r._measurement == \"interface\"\r\n  )\r\n  |> keyValues(keyColumns: [\"name\"])\r\n  |> group()\r\n  |> keep(columns: [\"name\"])\r\n  |> sort(columns: [\"name\"])\r\n",
        "hide": 0,
        "includeAll": true,
        "label": "",
        "multi": true,
        "name": "LAN",
        "options": [],
        "query": {
          "0": "f",
          "1": "r",
          "2": "o",
          "3": "m",
          "4": "(",
          "5": "b",
          "6": "u",
          "7": "c",
          "8": "k",
          "9": "e",
          "10": "t",
          "11": ":",
          "12": " ",
          "13": "v",
          "14": ".",
          "15": "d",
          "16": "e",
          "17": "f",
          "18": "a",
          "19": "u",
          "20": "l",
          "21": "t",
          "22": "B",
          "23": "u",
          "24": "c",
          "25": "k",
          "26": "e",
          "27": "t",
          "28": ")",
          "29": "\r",
          "30": "\n",
          "31": " ",
          "32": " ",
          "33": "|",
          "34": ">",
          "35": " ",
          "36": "r",
          "37": "a",
          "38": "n",
          "39": "g",
          "40": "e",
          "41": "(",
          "42": "s",
          "43": "t",
          "44": "a",
          "45": "r",
          "46": "t",
          "47": ":",
          "48": " ",
          "49": "v",
          "50": ".",
          "51": "t",
          "52": "i",
          "53": "m",
          "54": "e",
          "55": "R",
          "56": "a",
          "57": "n",
          "58": "g",
          "59": "e",
          "60": "S",
          "61": "t",
          "62": "a",
          "63": "r",
          "64": "t",
          "65": ",",
          "66": " ",
          "67": "s",
          "68": "t",
          "69": "o",
          "70": "p",
          "71": ":",
          "72": " ",
          "73": "v",
          "74": ".",
          "75": "t",
          "76": "i",
          "77": "m",
          "78": "e",
          "79": "R",
          "80": "a",
          "81": "n",
          "82": "g",
          "83": "e",
          "84": "S",
          "85": "t",
          "86": "o",
          "87": "p",
          "88": ")",
          "89": "\r",
          "90": "\n",
          "91": " ",
          "92": " ",
          "93": "|",
          "94": ">",
          "95": " ",
          "96": "f",
          "97": "i",
          "98": "l",
          "99": "t",
          "100": "e",
          "101": "r",
          "102": "(",
          "103": "f",
          "104": "n",
          "105": ":",
          "106": " ",
          "107": "(",
          "108": "r",
          "109": ")",
          "110": " ",
          "111": "=",
          "112": ">",
          "113": " ",
          "114": "\r",
          "115": "\n",
          "116": " ",
          "117": " ",
          "118": " ",
          "119": " ",
          "120": "r",
          "121": ".",
          "122": "_",
          "123": "m",
          "124": "e",
          "125": "a",
          "126": "s",
          "127": "u",
          "128": "r",
          "129": "e",
          "130": "m",
          "131": "e",
          "132": "n",
          "133": "t",
          "134": " ",
          "135": "=",
          "136": "=",
          "137": " ",
          "138": "\"",
          "139": "i",
          "140": "n",
          "141": "t",
          "142": "e",
          "143": "r",
          "144": "f",
          "145": "a",
          "146": "c",
          "147": "e",
          "148": "\"",
          "149": "\r",
          "150": "\n",
          "151": " ",
          "152": " ",
          "153": ")",
          "154": "\r",
          "155": "\n",
          "156": " ",
          "157": " ",
          "158": "|",
          "159": ">",
          "160": " ",
          "161": "k",
          "162": "e",
          "163": "y",
          "164": "V",
          "165": "a",
          "166": "l",
          "167": "u",
          "168": "e",
          "169": "s",
          "170": "(",
          "171": "k",
          "172": "e",
          "173": "y",
          "174": "C",
          "175": "o",
          "176": "l",
          "177": "u",
          "178": "m",
          "179": "n",
          "180": "s",
          "181": ":",
          "182": " ",
          "183": "[",
          "184": "\"",
          "185": "n",
          "186": "a",
          "187": "m",
          "188": "e",
          "189": "\"",
          "190": "]",
          "191": ")",
          "192": "\r",
          "193": "\n",
          "194": " ",
          "195": " ",
          "196": "|",
          "197": ">",
          "198": " ",
          "199": "g",
          "200": "r",
          "201": "o",
          "202": "u",
          "203": "p",
          "204": "(",
          "205": ")",
          "206": "\r",
          "207": "\n",
          "208": " ",
          "209": " ",
          "210": "|",
          "211": ">",
          "212": " ",
          "213": "k",
          "214": "e",
          "215": "e",
          "216": "p",
          "217": "(",
          "218": "c",
          "219": "o",
          "220": "l",
          "221": "u",
          "222": "m",
          "223": "n",
          "224": "s",
          "225": ":",
          "226": " ",
          "227": "[",
          "228": "\"",
          "229": "n",
          "230": "a",
          "231": "m",
          "232": "e",
          "233": "\"",
          "234": "]",
          "235": ")",
          "236": "\r",
          "237": "\n",
          "238": " ",
          "239": " ",
          "240": "|",
          "241": ">",
          "242": " ",
          "243": "s",
          "244": "o",
          "245": "r",
          "246": "t",
          "247": "(",
          "248": "c",
          "249": "o",
          "250": "l",
          "251": "u",
          "252": "m",
          "253": "n",
          "254": "s",
          "255": ":",
          "256": " ",
          "257": "[",
          "258": "\"",
          "259": "n",
          "260": "a",
          "261": "m",
          "262": "e",
          "263": "\"",
          "264": "]",
          "265": ")",
          "266": "\r",
          "267": "\n",
          "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => \r\n    r._measurement == \"interface\"\r\n  )\r\n  |> keyValues(keyColumns: [\"name\"])\r\n  |> group()\r\n  |> keep(columns: [\"name\"])\r\n  |> sort(columns: [\"name\"])\r\n"
        },
        "refresh": 1,
        "regex": "/^(?!enc0$|igb0$|igb1$)/",
        "skipUrlSync": false,
        "sort": 0,
        "type": "query"
      },
      {
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "influxdb",
          "uid": "K3cQFTA4k"
        },
        "definition": "from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"gateways\" and\r\n  r.host =~ /^${Host:regex}$/)\r\n|> keyValues(keyColumns: [\"gateway_name\"])\r\n|> group()\r\n|> keep(columns: [\"gateway_name\"])\r\n|> distinct(column: \"gateway_name\")",
        "hide": 0,
        "includeAll": true,
        "multi": true,
        "name": "Gateway",
        "options": [],
        "query": "from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"gateways\" and\r\n  r.host =~ /^${Host:regex}$/)\r\n|> keyValues(keyColumns: [\"gateway_name\"])\r\n|> group()\r\n|> keep(columns: [\"gateway_name\"])\r\n|> distinct(column: \"gateway_name\")",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "type": "query"
      },
      {
        "current": {
          "selected": true,
          "text": [
            "All"
          ],
          "value": [
            "$__all"
          ]
        },
        "hide": 0,
        "includeAll": true,
        "multi": true,
        "name": "WAN",
        "options": [
          {
            "selected": true,
            "text": "All",
            "value": "$__all"
          },
          {
            "selected": false,
            "text": "igb1",
            "value": "igb1"
          }
        ],
        "query": "igb1",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      },
      {
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "influxdb",
          "uid": "K3cQFTA4k"
        },
        "definition": "from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"interface\")\r\n  |> last()\r\n  |> group(columns: [\"tag\"])\r\n  |> keep(columns: [\"name\"])",
        "hide": 0,
        "includeAll": true,
        "label": "FW_Interface",
        "multi": true,
        "name": "iface",
        "options": [],
        "query": "from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"interface\")\r\n  |> last()\r\n  |> group(columns: [\"tag\"])\r\n  |> keep(columns: [\"name\"])",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "type": "query"
      },
      {
        "allValue": "*",
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "elasticsearch",
          "uid": "jV5rFTA4z"
        },
        "definition": "{\"find\": \"terms\", \"field\": \"dst_port\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}",
        "hide": 0,
        "includeAll": true,
        "label": "FW_Destination Port",
        "multi": true,
        "name": "dst_port",
        "options": [],
        "query": "{\"find\": \"terms\", \"field\": \"dst_port\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "type": "query"
      },
      {
        "allValue": "*",
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "elasticsearch",
          "uid": "jV5rFTA4z"
        },
        "definition": "{\"find\": \"terms\", \"field\": \"src_ip\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}",
        "hide": 0,
        "includeAll": true,
        "label": "FW_Source IP",
        "multi": true,
        "name": "src_ip",
        "options": [],
        "query": "{\"find\": \"terms\", \"field\": \"src_ip\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "type": "query"
      }
    ]
  },
  "time": {
    "from": "now-24h",
    "to": "now"
  },
  "timepicker": {
    "hidden": false,
    "refresh_intervals": [
      "10s"
    ]
  },
  "timezone": "",
  "title": "OPNsense",
  "uid": "suTmk8c7k",
  "version": 29,
  "weekStart": ""
}